rdf=(function(){var b={};b.encodeString=function(l){var e="",k=false,h=0,g=l.length;while(h<g){var f=h++;if(!k){var c=l.charCodeAt(f);if(55296<=c&&c<=56319){var j=l.charCodeAt(f+1);c=(c-55296)*1024+(j-56320)+65536;k=true}if(c>1114111){throw new Error("Char out of range")}var d="00000000".concat((new Number(c)).toString(16).toUpperCase());if(c>=65536){e+="\\U"+d.slice(-8)}else{if(c>=127||c<=31){switch(c){case 9:e+="\\t";break;case 10:e+="\\n";break;case 13:e+="\\r";break;default:e+="\\u"+d.slice(-4);break}}else{switch(c){case 34:e+='\\"';break;case 92:e+="\\\\";break;default:e+=l.charAt(f);break}}}}else{k=!k}}return e};b.BlankNode=function(){return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"BlankNode"},nominalValue:{writable:false,configurable:false,enumerable:true,value:"b".concat(++b.BlankNode.NEXTID)},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue}},equals:{writable:true,configurable:false,enumerable:true,value:function(c){if(!c.hasOwnProperty("interfaceName")){return this.nominalValue==c}return(c.interfaceName==this.interfaceName)?this.nominalValue==c.nominalValue:false}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return"_:".concat(this.nominalValue)}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){return b.encodeString(this.toString())}},h:{configurable:false,enumerable:false,get:function(){return this.nominalValue}},})};b.BlankNode.NEXTID=0;b.NamedNode=function(c){return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"NamedNode"},nominalValue:{writable:false,configurable:false,enumerable:true,value:c},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue}},equals:{writable:true,configurable:false,enumerable:true,value:function(d){if(!d.hasOwnProperty("interfaceName")){return this.nominalValue==d}return(d.interfaceName==this.interfaceName)?this.nominalValue==d.nominalValue:false}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue.toString()}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){return"<"+b.encodeString(this.toString())+">"}},h:{configurable:false,enumerable:false,get:function(){return this.nominalValue}}})};b.Literal=function(e,f,c,d){if(typeof f=="string"&&f[0]=="@"){f=f.slice(1)}return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"Literal"},nominalValue:{writable:false,configurable:false,enumerable:true,value:e},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return d===null?this.nominalValue:d}},language:{writable:false,configurable:false,enumerable:true,value:f},datatype:{writable:false,configurable:false,enumerable:true,value:c},equals:{writable:true,configurable:false,enumerable:true,value:function(g){if(!g.hasOwnProperty("interfaceName")){return this.valueOf()==g}if(g.interfaceName!=this.interfaceName){return false}return this.h==g.h}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue.toString()}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){var g='"'+b.encodeString(this.nominalValue)+'"';if(Boolean(this.language).valueOf()){return g.concat("@"+this.language)}if(Boolean(this.datatype).valueOf()){return g.concat("^^"+this.datatype.toNT())}return g}},h:{writable:false,configurable:false,enumerable:false,value:f+"|"+(c?c.toString():"")+"|"+e.toString()}})};b.Triple=function(c,d,e){return Object.defineProperties({},{subject:{writable:false,configurable:false,enumerable:true,value:c},property:{writable:false,configurable:false,enumerable:true,value:d},object:{writable:false,configurable:false,enumerable:true,value:e},equals:{writable:true,configurable:false,enumerable:true,value:function(f){return this.s.equals(f.s)&&this.p.equals(f.p)&&this.o.equals(f.o)}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.s.toNT()+" "+this.p.toNT()+" "+this.o.toNT()+" ."}},s:{configurable:false,enumerable:false,get:function(){return this.subject}},p:{configurable:false,enumerable:false,get:function(){return this.property}},o:{configurable:false,enumerable:false,get:function(){return this.object}}})};b.Graph=function(c){return Object.defineProperties({},{_graph:{writable:true,configurable:false,enumerable:false,value:[]},_spo:{writable:true,configurable:false,enumerable:false,value:{}},length:{configurable:false,enumerable:true,get:function(){return this._graph.length}},add:{writable:false,configurable:false,enumerable:true,value:function(d){this._spo[d.s.h]||(this._spo[d.s.h]={});this._spo[d.s.h][d.p.h]||(this._spo[d.s.h][d.p.h]={});if(!this._spo[d.s.h][d.p.h][d.o.h]){this._spo[d.s.h][d.p.h][d.o.h]=d;this._graph.push(d);this.actions.forEach(function(e){e.run(d)})}return this}},addArray:{writable:false,configurable:false,enumerable:false,value:function(e){if(Array.isArray(e)){var f=this,d=e.forEach(function(g){f.add(g)})}return this}},remove:{writable:false,configurable:false,enumerable:true,value:function(d){this._spo[d.s.h]&&this._spo[d.s.h][d.p.h]&&this._spo[d.s.h][d.p.h][d.o.h]&&(delete this._spo[d.s.h][d.p.h][d.o.h]&&this._graph.splice(this._graph.indexOf(d),1));return this}},removeMatches:{writable:false,configurable:false,enumerable:true,value:function(d,f,g){d=arguments[0]===undefined?null:d;f=arguments[1]===undefined?null:f;g=arguments[2]===undefined?null:g;var e=[];this.forEach(function(h,j){(d===null||h.s.equals(d))&&(f===null||h.p.equals(f))&&(g===null||h.o.equals(g))&&e.push(h)});for(i in e){this.remove(e[i])}return this}},toArray:{writable:false,configurable:false,enumerable:true,value:function(){return this._graph.slice(0)}},some:{writable:false,configurable:false,enumerable:true,value:function(d){return this._graph.some(d)}},every:{writable:false,configurable:false,enumerable:true,value:function(d){return this._graph.every(d)}},filter:{writable:false,configurable:false,enumerable:true,value:function(d){return new b.Graph(this._graph.filter(d))}},forEach:{writable:false,configurable:false,enumerable:true,value:function(d){var e=this;this._graph.forEach(function(f){d(f,e)})}},match:{writable:false,configurable:false,enumerable:true,value:function(e,f,g,d){e=arguments[0]===undefined?null:e;f=arguments[1]===undefined?null:f;g=arguments[2]===undefined?null:g;d=arguments[3]===undefined?null:d;var h=0;if(d<1){d=-1}return new b.Graph(this._graph.filter(function(j){if(h==d){return false}return(e===null||j.s.equals(e))&&(f===null||j.p.equals(f))&&(g===null||j.o.equals(g))&&++h}))}},merge:{writable:false,configurable:false,enumerable:true,value:function(d){return new b.Graph().addAll(this).addAll(d)}},addAll:{writable:false,configurable:false,enumerable:true,value:function(d){return this.addArray(d.toArray())}},actions:{writable:false,configurable:false,enumerable:true,value:[]},addAction:{writable:false,configurable:false,enumerable:true,value:function(d,e){if(e){this.forEach(function(f,h){d.run(f,h)})}this.actions.push(d);return this}}}).addArray(c)};b.TripleAction=function(d,c){return Object.defineProperties({},{action:{writable:true,configurable:false,enumerable:true,value:c},test:{writable:true,configurable:false,enumerable:true,value:d},run:{writable:false,configurable:false,enumerable:true,value:function(e,f){if(this.test(e)){this.action(e,f)}}}})};b.PrefixMap=function(c){return Object.defineProperties({},{resolve:{writable:false,configurable:false,enumerable:true,value:function(e){var d=e.indexOf(":");if(d<0||e.indexOf("//")>=0){return null}var f=e.slice(0,d).toLowerCase();if(!this[f]){return null}return this[f].concat(e.slice(++d))}},shrink:{writable:false,configurable:false,enumerable:true,value:function(d){for(pref in this){if(d.substr(0,this[pref].length)==this[pref]){return pref+":"+d.slice(this[pref].length)}}return d}},setDefault:{writable:false,configurable:false,enumerable:true,value:function(d){this[""]=d}},addAll:{writable:false,configurable:false,enumerable:true,value:function(e,d){for(p in e){if(!this[p]||d){this[p]=e[p]}}return this}}}).addAll(c)};b.TermMap=function(c){return Object.defineProperties({},{resolve:{writable:false,configurable:false,enumerable:true,value:function(d){if(this[d]){return this[d]}if(this[""]){return this[""].concat(d)}return null}},shrink:{writable:false,configurable:false,enumerable:true,value:function(d){for(t in this){if(this[t]==d){return t}}return d}},setDefault:{writable:false,configurable:false,enumerable:true,value:function(d){this[""]=d}},addAll:{writable:false,configurable:false,enumerable:true,value:function(e,d){for(t in e){if(!this[t]||d){this[t]=e[t]}}return this}}}).addAll(c)};b.Profile=function(c){return Object.defineProperties({},{prefixes:{writable:false,configurable:false,enumerable:true,value:new b.PrefixMap},terms:{writable:false,configurable:false,enumerable:true,value:new b.TermMap},resolve:{writable:false,configurable:false,enumerable:true,value:function(d){return d.indexOf(":")>=0?this.prefixes.resolve(d):this.terms.resolve(d)}},setDefaultVocabulary:{writable:false,configurable:false,enumerable:true,value:function(d){this.terms.setDefault(d)}},setDefaultPrefix:{writable:false,configurable:false,enumerable:true,value:function(d){this.prefixes.setDefault(d)}},setTerm:{writable:false,configurable:false,enumerable:true,value:function(d,e){this.terms[d]=e}},setPrefix:{writable:false,configurable:false,enumerable:true,value:function(d,e){this.prefixes[d]=e}},importProfile:{writable:false,configurable:false,enumerable:true,value:function(e,d){if(!e){return this}this.prefixes.addAll(e.prefixes,d);this.terms.addAll(e.terms,d);return this}}}).importProfile(c)};b.RDFEnvironment=function(){var d={terms:{},prefixes:{owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdfa:"http://www.w3.org/ns/rdfa#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",}};var c={};for(v in x=["string","boolean","dateTime","date","time","int","double","float","decimal","integer","nonPositiveInteger","negativeInteger","long","int","short","byte","nonNegativeInteger","unsignedLong","unsignedInt","unsignedShort","unsignedByte","positiveInteger"]){c[x[v]]=d.prefixes.xsd.concat(x[v])}return Object.defineProperties(new b.Profile(d),{createBlankNode:{writable:false,configurable:false,enumerable:true,value:function(){return new b.BlankNode}},createNamedNode:{writable:false,configurable:false,enumerable:true,value:function(e){return new b.NamedNode(e)}},createLiteral:{writable:false,configurable:false,enumerable:true,value:function(h){var e=null,g=arguments[2],f=h;if(arguments[1]){if(arguments[1].hasOwnProperty("interfaceName")){g=arguments[1]}else{e=arguments[1]}}if(g){switch(g.valueOf()){case c.string:f=new String(f);break;case c["boolean"]:f=(new Boolean(f=="false"?false:f)).valueOf();break;case c["float"]:case c.integer:case c["long"]:case c["double"]:case c.decimal:case c.nonPositiveInteger:case c.nonNegativeInteger:case c.negativeInteger:case c["int"]:case c.unsignedLong:case c.positiveInteger:case c["short"]:case c.unsignedInt:case c["byte"]:case c.unsignedShort:case c.unsignedByte:f=(new Number(f)).valueOf();break;case c.date:case c.time:case c.dateTime:f=new Date(f);break}}return new b.Literal(h,e,g,f)}},createTriple:{writable:false,configurable:false,enumerable:true,value:function(e,f,g){return new b.Triple(e,f,g)}},createGraph:{writable:false,configurable:false,enumerable:true,value:function(e){return new b.Graph(e)}},createAction:{writable:false,configurable:false,enumerable:true,value:function(f,e){return new b.TripleAction(f,e)}},createProfile:{writable:false,configurable:false,enumerable:true,value:function(e){return new b.Profile(!e?this:null)}},createTermMap:{writable:false,configurable:false,enumerable:true,value:function(e){return new b.TermMap(!e?this.terms:null)}},createPrefixMap:{writable:false,configurable:false,enumerable:true,value:function(e){return new b.PrefixMap(!e?this.prefixes:null)}},})};var a=new b.RDFEnvironment;Object.keys(b).forEach(function(c,d,e){a[c]=e[c]});return a})();if(module){module.exports=rdf};