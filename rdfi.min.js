rdf=(function(){encodeString=function(j){var c="",h=false,f=0,e=j.length;while(f<e){var d=f++;if(!h){var a=j.charCodeAt(d);if(55296<=a&&a<=56319){var g=j.charCodeAt(d+1);a=(a-55296)*1024+(g-56320)+65536;h=true}if(a>1114111){throw new Error("Char out of range")}var b="00000000".concat((new Number(a)).toString(16).toUpperCase());if(a>=65536){c+="\\U"+b.slice(-8)}else{if(a>=127||a<=31){switch(a){case 9:c+="\\t";break;case 10:c+="\\n";break;case 13:c+="\\r";break;default:c+="\\u"+b.slice(-4);break}}else{switch(a){case 34:c+='\\"';break;case 92:c+="\\\\";break;default:c+=j.charAt(d);break}}}}else{h=!h}}return c};BlankNode=function(){return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"BlankNode"},value:{writable:false,configurable:false,enumerable:true,value:"b".concat(++BlankNode.NEXTID)},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return this.value}},equals:{writable:true,configurable:false,enumerable:true,value:function(a){if(!a.hasOwnProperty("interfaceName")){return this.value==a}return(a.interfaceName==this.interfaceName)?this.value==a.value:false}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return"_:".concat(this.value)}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){return encodeString(this.toString())}},h:{configurable:false,enumerable:false,get:function(){return this.value}},})};BlankNode.NEXTID=0;NamedNode=function(a){return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"NamedNode"},value:{writable:false,configurable:false,enumerable:true,value:a},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return this.value}},equals:{writable:true,configurable:false,enumerable:true,value:function(b){if(!b.hasOwnProperty("interfaceName")){return this.value==b}return(b.interfaceName==this.interfaceName)?this.value==b.value:false}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.value.toString()}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){return"<"+encodeString(this.toString())+">"}},h:{configurable:false,enumerable:false,get:function(){return this.value}}})};Literal=function(c,d,a,b){if(typeof d=="string"&&d[0]=="@"){d=d.slice(1)}return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"Literal"},value:{writable:false,configurable:false,enumerable:true,value:c},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return b===null?this.value:b}},language:{writable:false,configurable:false,enumerable:true,value:d},datatype:{writable:false,configurable:false,enumerable:true,value:a},equals:{writable:true,configurable:false,enumerable:true,value:function(e){if(!e.hasOwnProperty("interfaceName")){return this.valueOf()==e}if(e.interfaceName!=this.interfaceName){return false}return this.h==e.h}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.value.toString()}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){var e='"'+encodeString(this.value)+'"';if(Boolean(this.language).valueOf()){return e.concat("@"+this.language)}if(Boolean(this.datatype).valueOf()){return e.concat("^^"+this.datatype.toNT())}return e}},h:{writable:false,configurable:false,enumerable:false,value:d+"|"+(a?a.toString():"")+"|"+c.toString()}})};Triple=function(a,b,c){return Object.defineProperties({},{subject:{writable:false,configurable:false,enumerable:true,value:a},property:{writable:false,configurable:false,enumerable:true,value:b},object:{writable:false,configurable:false,enumerable:true,value:c},equals:{writable:true,configurable:false,enumerable:true,value:function(d){return this.s.equals(d.s)&&this.p.equals(d.p)&&this.o.equals(d.o)}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.s.toNT()+" "+this.p.toNT()+" "+this.o.toNT()+" ."}},s:{configurable:false,enumerable:false,get:function(){return this.subject}},p:{configurable:false,enumerable:false,get:function(){return this.property}},o:{configurable:false,enumerable:false,get:function(){return this.object}}})};Graph=function(b){return Object.defineProperties({},{_graph:{writable:true,configurable:false,enumerable:false,value:[]},_spo:{writable:true,configurable:false,enumerable:false,value:{}},length:{configurable:false,enumerable:true,get:function(){return this._graph.length}},add:{writable:false,configurable:false,enumerable:true,value:function(a){this._spo[a.s.h]||(this._spo[a.s.h]={});this._spo[a.s.h][a.p.h]||(this._spo[a.s.h][a.p.h]={});if(!this._spo[a.s.h][a.p.h][a.o.h]){this._spo[a.s.h][a.p.h][a.o.h]=a;this._graph.push(a);this.actions.forEach(function(c){c.run(a)})}return this}},addArray:{writable:false,configurable:false,enumerable:false,value:function(d){if(Array.isArray(d)){var e=this,c=d.forEach(function(a){e.add(a)})}return this}},remove:{writable:false,configurable:false,enumerable:true,value:function(a){this._spo[a.s.h]&&this._spo[a.s.h][a.p.h]&&this._spo[a.s.h][a.p.h][a.o.h]&&(delete this._spo[a.s.h][a.p.h][a.o.h]&&this._graph.splice(this._graph.indexOf(a),1));return this}},removeMatches:{writable:false,configurable:false,enumerable:true,value:function(a,d,e){a=arguments[0]===undefined?null:a;d=arguments[1]===undefined?null:d;e=arguments[2]===undefined?null:e;var c=[];this.forEach(function(f,h){(a===null||f.s.equals(a))&&(d===null||f.p.equals(d))&&(e===null||f.o.equals(e))&&c.push(f)});for(i in c){this.remove(c[i])}return this}},toArray:{writable:false,configurable:false,enumerable:true,value:function(){return this._graph.slice(0)}},some:{writable:false,configurable:false,enumerable:true,value:function(a){return this._graph.some(a)}},every:{writable:false,configurable:false,enumerable:true,value:function(a){return this._graph.every(a)}},filter:{writable:false,configurable:false,enumerable:true,value:function(a){return new Graph(this._graph.filter(a))}},forEach:{writable:false,configurable:false,enumerable:true,value:function(a){var c=this;this._graph.forEach(function(d){a(d,c)})}},match:{writable:false,configurable:false,enumerable:true,value:function(d,e,f,a){d=arguments[0]===undefined?null:d;e=arguments[1]===undefined?null:e;f=arguments[2]===undefined?null:f;a=arguments[3]===undefined?null:a;var g=0;if(a<1){a=-1}return new Graph(this._graph.filter(function(c){if(g==a){return false}return(d===null||c.s.equals(d))&&(e===null||c.p.equals(e))&&(f===null||c.o.equals(f))&&++g}))}},merge:{writable:false,configurable:false,enumerable:true,value:function(a){return new Graph()["import"](this)["import"](a)}},"import":{writable:false,configurable:false,enumerable:true,value:function(a){return this.addArray(a.toArray())}},actions:{writable:false,configurable:false,enumerable:true,value:[]},addAction:{writable:false,configurable:false,enumerable:true,value:function(c,d){if(d){this.forEach(function(a,e){c.run(a,e)})}this.actions.push(c);return this}}}).addArray(b)};TripleAction=function(b,a){return Object.defineProperties({},{action:{writable:true,configurable:false,enumerable:true,value:a},test:{writable:true,configurable:false,enumerable:true,value:b},run:{writable:false,configurable:false,enumerable:true,value:function(c,d){if(this.test(c)){this.action(c,d)}}}})};PrefixMap=function(a){return Object.defineProperties({},{resolve:{writable:false,configurable:false,enumerable:false,value:function(c){var b=c.indexOf(":");if(b<0||c.indexOf("//")>=0){return null}var d=c.slice(0,b).toLowerCase();if(!this[d]){return null}return this[d].concat(c.slice(++b))}},shrink:{writable:false,configurable:false,enumerable:false,value:function(b){for(pref in this){if(b.substr(0,this[pref].length)==this[pref]){return pref+":"+b.slice(this[pref].length)}}return b}},setDefault:{writable:false,configurable:false,enumerable:false,value:function(b){this[""]=b}},"import":{writable:false,configurable:false,enumerable:false,value:function(c,b){for(p in c){if(!this[p]||b){this[p]=c[p]}}return this}}})["import"](a)};TermMap=function(a){return Object.defineProperties({},{resolve:{writable:false,configurable:false,enumerable:false,value:function(b){if(this[b]){return this[b]}if(this[""]){return this[""].concat(b)}return null}},shrink:{writable:false,configurable:false,enumerable:false,value:function(b){for(t in this){if(this[t]==b){return t}}return b}},setDefault:{writable:false,configurable:false,enumerable:false,value:function(b){this[""]=b}},"import":{writable:false,configurable:false,enumerable:false,value:function(c,b){for(t in c){if(!this[t]||b){this[t]=c[t]}}return this}}})["import"](a)};Profile=function(a){return Object.defineProperties({},{prefixes:{writable:false,configurable:false,enumerable:true,value:new PrefixMap},terms:{writable:false,configurable:false,enumerable:true,value:new TermMap},resolve:{writable:false,configurable:false,enumerable:false,value:function(b){return b.indexOf(":")>=0?this.prefixes.resolve(b):this.terms.resolve(b)}},setDefaultVocabulary:{writable:false,configurable:false,enumerable:false,value:function(b){this.terms.setDefault(b)}},setDefaultPrefix:{writable:false,configurable:false,enumerable:false,value:function(b){this.prefixes.setDefault(b)}},setTerm:{writable:false,configurable:false,enumerable:false,value:function(b,c){this.terms[b]=c}},setPrefix:{writable:false,configurable:false,enumerable:false,value:function(b,c){this.prefixes[b]=c}},importProfile:{writable:false,configurable:false,enumerable:false,value:function(c,b){if(!c){return this}this.prefixes["import"](c.prefixes,b);this.terms["import"](c.terms,b);return this}}}).importProfile(a)};RDFEnvironment=function(){var b={terms:{},prefixes:{owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdfa:"http://www.w3.org/ns/rdfa#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",}};var a={};for(v in x=["string","boolean","dateTime","date","time","int","double","float","decimal","integer","nonPositiveInteger","negativeInteger","long","int","short","byte","nonNegativeInteger","unsignedLong","unsignedInt","unsignedShort","unsignedByte","positiveInteger"]){a[x[v]]=b.prefixes.xsd.concat(x[v])}return Object.defineProperties(new Profile(b),{createBlankNode:{writable:false,configurable:false,enumerable:false,value:function(){return new BlankNode}},createNamedNode:{writable:false,configurable:false,enumerable:false,value:function(c){return new NamedNode(c)}},createLiteral:{writable:false,configurable:false,enumerable:false,value:function(f){var c=null,e=arguments[2],d=f;if(arguments[1]){if(arguments[1].hasOwnProperty("interfaceName")){e=arguments[1]}else{c=arguments[1]}}if(e){switch(e.valueOf()){case a.string:d=new String(d);break;case a["boolean"]:d=(new Boolean(d=="false"?false:d)).valueOf();break;case a["float"]:case a.integer:case a["long"]:case a["double"]:case a.decimal:case a.nonPositiveInteger:case a.nonNegativeInteger:case a.negativeInteger:case a["int"]:case a.unsignedLong:case a.positiveInteger:case a["short"]:case a.unsignedInt:case a["byte"]:case a.unsignedShort:case a.unsignedByte:d=(new Number(d)).valueOf();break;case a.date:case a.time:case a.dateTime:d=new Date(d);break}}return new Literal(f,c,e,d)}},createTriple:{writable:false,configurable:false,enumerable:false,value:function(c,d,e){return new Triple(c,d,e)}},createAction:{writable:false,configurable:false,enumerable:false,value:function(d,c){return new TripleAction(d,c)}},createProfile:{writable:false,configurable:false,enumerable:false,value:function(c){return new Profile(!c?this:null)}},createTermMap:{writable:false,configurable:false,enumerable:false,value:function(c){return new TermMap(!c?this.terms:null)}},createPrefixMap:{writable:false,configurable:false,enumerable:false,value:function(c){return new PrefixMap(!c?this.prefixes:null)}},})};return new RDFEnvironment})();if(module){module.exports=rdf};