rdf=(function(){var a={};a.encodeString=function(k){var d="",j=false,g=0,f=k.length;while(g<f){var e=g++;if(!j){var b=k.charCodeAt(e);if(55296<=b&&b<=56319){var h=k.charCodeAt(e+1);b=(b-55296)*1024+(h-56320)+65536;j=true}if(b>1114111){throw new Error("Char out of range")}var c="00000000".concat((new Number(b)).toString(16).toUpperCase());if(b>=65536){d+="\\U"+c.slice(-8)}else{if(b>=127||b<=31){switch(b){case 9:d+="\\t";break;case 10:d+="\\n";break;case 13:d+="\\r";break;default:d+="\\u"+c.slice(-4);break}}else{switch(b){case 34:d+='\\"';break;case 92:d+="\\\\";break;default:d+=k.charAt(e);break}}}}else{j=!j}}return d};a.BlankNode=function(){return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"BlankNode"},nominalValue:{writable:false,configurable:false,enumerable:true,value:"b".concat(++a.BlankNode.NEXTID)},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue}},equals:{writable:true,configurable:false,enumerable:true,value:function(b){if(!b.hasOwnProperty("interfaceName")){return this.nominalValue==b}return(b.interfaceName==this.interfaceName)?this.nominalValue==b.nominalValue:false}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return"_:".concat(this.nominalValue)}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){return encodeString(this.toString())}},h:{configurable:false,enumerable:false,get:function(){return this.nominalValue}},})};a.BlankNode.NEXTID=0;a.NamedNode=function(b){return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"NamedNode"},value:{writable:false,configurable:false,enumerable:true,value:b},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue}},equals:{writable:true,configurable:false,enumerable:true,value:function(c){if(!c.hasOwnProperty("interfaceName")){return this.nominalValue==c}return(c.interfaceName==this.interfaceName)?this.nominalValue==c.nominalValue:false}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue.toString()}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){return"<"+encodeString(this.toString())+">"}},h:{configurable:false,enumerable:false,get:function(){return this.nominalValue}}})};a.Literal=function(d,e,b,c){if(typeof e=="string"&&e[0]=="@"){e=e.slice(1)}return Object.defineProperties({},{interfaceName:{writable:false,configurable:false,enumerable:true,value:"Literal"},value:{writable:false,configurable:false,enumerable:true,value:d},valueOf:{writable:false,configurable:false,enumerable:true,value:function(){return c===null?this.nominalValue:c}},language:{writable:false,configurable:false,enumerable:true,value:e},datatype:{writable:false,configurable:false,enumerable:true,value:b},equals:{writable:true,configurable:false,enumerable:true,value:function(f){if(!f.hasOwnProperty("interfaceName")){return this.valueOf()==f}if(f.interfaceName!=this.interfaceName){return false}return this.h==f.h}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.nominalValue.toString()}},toNT:{writable:false,configurable:false,enumerable:true,value:function(){var f='"'+encodeString(this.nominalValue)+'"';if(Boolean(this.language).valueOf()){return f.concat("@"+this.language)}if(Boolean(this.datatype).valueOf()){return f.concat("^^"+this.datatype.toNT())}return f}},h:{writable:false,configurable:false,enumerable:false,value:e+"|"+(b?b.toString():"")+"|"+d.toString()}})};a.Triple=function(b,c,d){return Object.defineProperties({},{subject:{writable:false,configurable:false,enumerable:true,value:b},property:{writable:false,configurable:false,enumerable:true,value:c},object:{writable:false,configurable:false,enumerable:true,value:d},equals:{writable:true,configurable:false,enumerable:true,value:function(e){return this.s.equals(e.s)&&this.p.equals(e.p)&&this.o.equals(e.o)}},toString:{writable:false,configurable:false,enumerable:true,value:function(){return this.s.toNT()+" "+this.p.toNT()+" "+this.o.toNT()+" ."}},s:{configurable:false,enumerable:false,get:function(){return this.subject}},p:{configurable:false,enumerable:false,get:function(){return this.property}},o:{configurable:false,enumerable:false,get:function(){return this.object}}})};a.Graph=function(b){return Object.defineProperties({},{_graph:{writable:true,configurable:false,enumerable:false,value:[]},_spo:{writable:true,configurable:false,enumerable:false,value:{}},length:{configurable:false,enumerable:true,get:function(){return this._graph.length}},add:{writable:false,configurable:false,enumerable:true,value:function(c){this._spo[c.s.h]||(this._spo[c.s.h]={});this._spo[c.s.h][c.p.h]||(this._spo[c.s.h][c.p.h]={});if(!this._spo[c.s.h][c.p.h][c.o.h]){this._spo[c.s.h][c.p.h][c.o.h]=c;this._graph.push(c);this.actions.forEach(function(d){d.run(c)})}return this}},addArray:{writable:false,configurable:false,enumerable:false,value:function(d){if(Array.isArray(d)){var e=this,c=d.forEach(function(f){e.add(f)})}return this}},remove:{writable:false,configurable:false,enumerable:true,value:function(c){this._spo[c.s.h]&&this._spo[c.s.h][c.p.h]&&this._spo[c.s.h][c.p.h][c.o.h]&&(delete this._spo[c.s.h][c.p.h][c.o.h]&&this._graph.splice(this._graph.indexOf(c),1));return this}},removeMatches:{writable:false,configurable:false,enumerable:true,value:function(c,e,f){c=arguments[0]===undefined?null:c;e=arguments[1]===undefined?null:e;f=arguments[2]===undefined?null:f;var d=[];this.forEach(function(h,j){(c===null||h.s.equals(c))&&(e===null||h.p.equals(e))&&(f===null||h.o.equals(f))&&d.push(h)});for(i in d){this.remove(d[i])}return this}},toArray:{writable:false,configurable:false,enumerable:true,value:function(){return this._graph.slice(0)}},some:{writable:false,configurable:false,enumerable:true,value:function(c){return this._graph.some(c)}},every:{writable:false,configurable:false,enumerable:true,value:function(c){return this._graph.every(c)}},filter:{writable:false,configurable:false,enumerable:true,value:function(c){return new a.Graph(this._graph.filter(c))}},forEach:{writable:false,configurable:false,enumerable:true,value:function(c){var d=this;this._graph.forEach(function(e){c(e,d)})}},match:{writable:false,configurable:false,enumerable:true,value:function(e,f,g,d){e=arguments[0]===undefined?null:e;f=arguments[1]===undefined?null:f;g=arguments[2]===undefined?null:g;d=arguments[3]===undefined?null:d;var h=0;if(d<1){d=-1}return new a.Graph(this._graph.filter(function(c){if(h==d){return false}return(e===null||c.s.equals(e))&&(f===null||c.p.equals(f))&&(g===null||c.o.equals(g))&&++h}))}},merge:{writable:false,configurable:false,enumerable:true,value:function(c){return new a.Graph().addAll(this).addAll(c)}},addAll:{writable:false,configurable:false,enumerable:true,value:function(c){return this.addArray(c.toArray())}},actions:{writable:false,configurable:false,enumerable:true,value:[]},addAction:{writable:false,configurable:false,enumerable:true,value:function(c,d){if(d){this.forEach(function(e,f){c.run(e,f)})}this.actions.push(c);return this}}}).addArray(b)};a.TripleAction=function(c,b){return Object.defineProperties({},{action:{writable:true,configurable:false,enumerable:true,value:b},test:{writable:true,configurable:false,enumerable:true,value:c},run:{writable:false,configurable:false,enumerable:true,value:function(d,e){if(this.test(d)){this.action(d,e)}}}})};a.PrefixMap=function(b){return Object.defineProperties({},{resolve:{writable:false,configurable:false,enumerable:true,value:function(d){var c=d.indexOf(":");if(c<0||d.indexOf("//")>=0){return null}var e=d.slice(0,c).toLowerCase();if(!this[e]){return null}return this[e].concat(d.slice(++c))}},shrink:{writable:false,configurable:false,enumerable:true,value:function(c){for(pref in this){if(c.substr(0,this[pref].length)==this[pref]){return pref+":"+c.slice(this[pref].length)}}return c}},setDefault:{writable:false,configurable:false,enumerable:true,value:function(c){this[""]=c}},addAll:{writable:false,configurable:false,enumerable:true,value:function(d,c){for(p in d){if(!this[p]||c){this[p]=d[p]}}return this}}}).addAll(b)};a.TermMap=function(b){return Object.defineProperties({},{resolve:{writable:false,configurable:false,enumerable:true,value:function(c){if(this[c]){return this[c]}if(this[""]){return this[""].concat(c)}return null}},shrink:{writable:false,configurable:false,enumerable:true,value:function(c){for(t in this){if(this[t]==c){return t}}return c}},setDefault:{writable:false,configurable:false,enumerable:true,value:function(c){this[""]=c}},addAll:{writable:false,configurable:false,enumerable:true,value:function(d,c){for(t in d){if(!this[t]||c){this[t]=d[t]}}return this}}}).addAll(b)};a.Profile=function(b){return Object.defineProperties({},{prefixes:{writable:false,configurable:false,enumerable:true,value:new a.PrefixMap},terms:{writable:false,configurable:false,enumerable:true,value:new a.TermMap},resolve:{writable:false,configurable:false,enumerable:true,value:function(c){return c.indexOf(":")>=0?this.prefixes.resolve(c):this.terms.resolve(c)}},setDefaultVocabulary:{writable:false,configurable:false,enumerable:true,value:function(c){this.terms.setDefault(c)}},setDefaultPrefix:{writable:false,configurable:false,enumerable:true,value:function(c){this.prefixes.setDefault(c)}},setTerm:{writable:false,configurable:false,enumerable:true,value:function(c,d){this.terms[c]=d}},setPrefix:{writable:false,configurable:false,enumerable:true,value:function(c,d){this.prefixes[c]=d}},importProfile:{writable:false,configurable:false,enumerable:true,value:function(d,c){if(!d){return this}this.prefixes.addAll(d.prefixes,c);this.terms.addAll(d.terms,c);return this}}}).importProfile(b)};a.RDFEnvironment=function(){var c={terms:{},prefixes:{owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdfa:"http://www.w3.org/ns/rdfa#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",}};var b={};for(v in x=["string","boolean","dateTime","date","time","int","double","float","decimal","integer","nonPositiveInteger","negativeInteger","long","int","short","byte","nonNegativeInteger","unsignedLong","unsignedInt","unsignedShort","unsignedByte","positiveInteger"]){b[x[v]]=c.prefixes.xsd.concat(x[v])}return Object.defineProperties(new a.Profile(c),{createBlankNode:{writable:false,configurable:false,enumerable:true,value:function(){return new a.BlankNode}},createNamedNode:{writable:false,configurable:false,enumerable:true,value:function(d){return new a.NamedNode(d)}},createLiteral:{writable:false,configurable:false,enumerable:true,value:function(g){var d=null,f=arguments[2],e=g;if(arguments[1]){if(arguments[1].hasOwnProperty("interfaceName")){f=arguments[1]}else{d=arguments[1]}}if(f){switch(f.valueOf()){case b.string:e=new String(e);break;case b["boolean"]:e=(new Boolean(e=="false"?false:e)).valueOf();break;case b["float"]:case b.integer:case b["long"]:case b["double"]:case b.decimal:case b.nonPositiveInteger:case b.nonNegativeInteger:case b.negativeInteger:case b["int"]:case b.unsignedLong:case b.positiveInteger:case b["short"]:case b.unsignedInt:case b["byte"]:case b.unsignedShort:case b.unsignedByte:e=(new Number(e)).valueOf();break;case b.date:case b.time:case b.dateTime:e=new Date(e);break}}return new a.Literal(g,d,f,e)}},createTriple:{writable:false,configurable:false,enumerable:true,value:function(d,e,f){return new a.Triple(d,e,f)}},createGraph:{writable:false,configurable:false,enumerable:true,value:function(d){return new a.Graph(d)}},createAction:{writable:false,configurable:false,enumerable:true,value:function(e,d){return new a.TripleAction(e,d)}},createProfile:{writable:false,configurable:false,enumerable:true,value:function(d){return new a.Profile(!d?this:null)}},createTermMap:{writable:false,configurable:false,enumerable:true,value:function(d){return new a.TermMap(!d?this.terms:null)}},createPrefixMap:{writable:false,configurable:false,enumerable:true,value:function(d){return new a.PrefixMap(!d?this.prefixes:null)}},})};return a})();if(module){module.exports=rdf};